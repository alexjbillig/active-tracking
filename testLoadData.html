<html>
<title>Test load data</title>
<link href="jsPsych-master/css/jspsych.css" rel="stylesheet" type="text/css"></link>
<body>

  <script>


    const audioFilenameStart = "audio/burstStimuli/densityLevel";
    const audioFilenameEnd = ".json"
    const numLevels = 25;
    const numBursts = 40;
    const burstPlusSilenceDurSecs = 0.2;
    const sampleRate = 48000;



    var allAudioData = [];
    for (i = 0; i < numLevels; i++) {
      allAudioData[i] = [];
      levelString = (i + 1).toString();
      for (j = 0; j < numBursts; j++) {
        burstString = (j + 1).toString();
        filename = audioFilenameStart +
        levelString.padStart(4, '0') + "_instance" + burstString.padStart(4, '0') +
        audioFilenameEnd;
        getFile(filename).then((data) => {
          // allAudioData[i] = allAudioData[i].concat(data)
          return data
        })
        allAudioData[i] = allAudioData[i].concat(data)
      }
    }

    async function getFile(filepath) {
      response = await fetch(filepath);
      data = await response.json();
      return data
    }

  </script>

</body>

</html>
